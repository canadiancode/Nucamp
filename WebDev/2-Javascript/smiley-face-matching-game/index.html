<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smiley Face Guessing game</title>

    <style>
        h1, p {
            text-align: center;
            margin: 1rem;
            padding: 0;
            margin-top: 1rem;
        }
        .smiley-container {
            display: flex;
            flex-direction: row;
        }
        .side {
            position: relative;
            width: 50%;
            height: 500px;
            background-color: lightgrey;
        }
        #leftSide {
            border-right: 1px black solid;
        }
        img {
            position: absolute;
            height: 50px;
            width: 50px;
        }
    </style>
</head>
<body onload="generateFaces()">

    <h1>Matching game</h1>
    <p>Click on the extra cmiling face on the left.</p>
    <div class="smiley-container">
        <div id="leftSide" class="side"></div>
        <div id="rightSide" class="side"></div>
    </div>

    <script>
        let round = 0;
        let numberOfFaces = 0;
        let aditionalFaces = null;

        const theLeftSide = document.querySelector('#leftSide');
        const theRightSide = document.querySelector('#rightSide');

        let windowWidth = window.innerWidth;
        let xAxisMax = (windowWidth / 2) - 55;

        function generateFaces() {

            aditionalFaces = 0;
            if (round === 0) {
                aditionalFaces = prompt('How many faces would you like to start with?');
            } else {
                aditionalFaces = prompt('How many more faces would you like to add?');
            }

            if (aditionalFaces === '' || aditionalFaces == 0) {
                alert('Please add at least 1 face.');
                setTimeout(regenFaces, 10);
                return;
            } else if (!aditionalFaces) {
                return;
            }

            // clear the smiles (could also loop through the child list)
            document.querySelectorAll('.side').forEach(side => {
                side.innerHTML = '';
            })

            // add x many more faces
            numberOfFaces += +aditionalFaces; // Urnary operator to turn string into number
            round++;

            // add faces
            for (let i = 0; i < numberOfFaces; i++) {
                let leftFace = document.createElement('img');
                leftFace.src = 'img/smile.png';
                leftFace.classList.add('wrong-face');

                // for the x axis
                let pushX = Math.floor(Math.random() * xAxisMax);

                // for the y axis
                let pushY = Math.floor(Math.random() * 400);

                leftFace.style.transform = `translate(${pushX}px, ${pushY}px)`;

                theLeftSide.appendChild(leftFace);

                const rightFace = leftFace.cloneNode(true);
                theRightSide.appendChild(rightFace);
            }

            // once all the faces are added, add the extra one:
            let extraFace = document.createElement('img');
            extraFace.src = 'img/smile.png';
            extraFace.classList.add('extra-face');
            theLeftSide.appendChild(extraFace);

            // for the x axis
            let pushX = Math.floor(Math.random() * xAxisMax);

            // for the y axis
            let pushY = Math.floor(Math.random() * 400);

            extraFace.style.transform = `translate(${pushX}px, ${pushY}px)`;
            extraFace.addEventListener('click', selectedExtraFace);
        }


        // function when the correct face is selected
        function selectedExtraFace() {
            alert(`You made it through ${round}!`);
            generateFaces();
        }

        // the click event for the DOM
        document.addEventListener('click', (event) => {
            // I would add the left side and right side if I wanted to add the event for clicking the background
            if (event.target.classList.contains('wrong-face')) {
                alert(`Oh no, you did not select the right face.\nYou made it to round ${round}.`);

                // clear the smiles
                document.querySelectorAll('.side').forEach(side => {
                    side.innerHTML = '';
                })

                alert('Lets play again!');
                numberOfFaces = 0;
                round = 0;
                generateFaces();
            }
        });

        // just a function to restart the question for how many faces to add
        function regenFaces() {
            generateFaces();
        }

    </script>
    
</body>
</html>